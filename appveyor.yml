version: '{branch}-{build}'
build_script:
- ps: >-
    cd src/DarkSkyCore

    dotnet restore

    dotnet build

    cd ../../

    dotnet pack --configuration release -o nupkgs/ src/DarkSkyCore
test_script:
- ps: >-
    cd test/DarkSkyCore.Tests

    dotnet restore

    dotnet build

    dotnet test -class DarkSky.UnitTests.Services.DarkSkyServiceUnitTests

    if($env:APPVEYOR_REPO_TAG) { dotnet test -class DarkSky.IntegrationTests.Services.DarkSkyServiceIntegrationTests}
artifacts:
- path: nupkgs/
  name: nuget
